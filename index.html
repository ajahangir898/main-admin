<!DOCTYPE html>
<html lang="en" style="background:#f9fafb">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SystemNext IT - Professional E-commerce Solutions</title>
    <meta name="description" content="SystemNext IT - Professional e-commerce platform. Build your online store with multi-tenant support, admin dashboard & 24/7 support.">
    <meta name="keywords" content="SystemNext IT, e-commerce, online store, Bangladesh, software solutions">
    <meta name="author" content="SystemNext IT">
    <meta name="theme-color" content="#6366F1">
    <link rel="icon" type="image/png" href="/icons/icon-32x32.png">
    
    <!-- Preconnect to main domain for faster image loading -->
    <link rel="preconnect" href="https://systemnextit.com">
    <link rel="dns-prefetch" href="https://systemnextit.com">
    <link rel="preconnect" href="https://images.systemnextit.com" crossorigin>
    <link rel="dns-prefetch" href="https://images.systemnextit.com">
    <link rel="preconnect" href="https://static.systemnextit.com" crossorigin>
    <link rel="dns-prefetch" href="https://static.systemnextit.com">

    
    
    <!-- Early bootstrap prefetch with parallel secondary data -->
    <script>
      (function(){
        var h = location.hostname, p = h.split('.'), t = p[0];
        var isMobile = window.innerWidth < 768;
        // Skip for admin/superadmin subdomains
        if (!t || t === 'www' || t === 'admin' || t === 'superadmin' || p.length < 3) return;
        // Check cached tenant ID for faster resolution
        var cachedId;
        try { cachedId = localStorage.getItem('tenant_id_' + t); } catch(e) {}
        var scope = cachedId || t;
        
        // Check sessionStorage cache first for instant reload (5 min TTL)
        var CACHE_TTL = 5 * 60 * 1000; // 5 minutes
        var bootstrapCacheKey = 'bs_' + scope;
        var secondaryCacheKey = 'sc_' + scope;
        
        try {
          var cachedBootstrap = sessionStorage.getItem(bootstrapCacheKey);
          if (cachedBootstrap) {
            var parsed = JSON.parse(cachedBootstrap);
            if (parsed.ts && (Date.now() - parsed.ts) < CACHE_TTL) {
              window.__BOOTSTRAP_DATA__ = parsed.data;
              window.__BOOTSTRAP_READY__ = true;
              // Skip carousel preload - React loads fast enough now
              // Background revalidation
              setTimeout(function() { fetchBootstrap(true); }, 100);
              // Load secondary from cache
              var cachedSecondary = sessionStorage.getItem(secondaryCacheKey);
              if (cachedSecondary) {
                var parsedSec = JSON.parse(cachedSecondary);
                if (parsedSec.ts && (Date.now() - parsedSec.ts) < CACHE_TTL) {
                  window.__SECONDARY_DATA__ = parsedSec.data;
                }
              }
              return;
            }
          }
        } catch(e) {}
        
        function fetchBootstrap(isBackground) {
          var x1 = new XMLHttpRequest();
          x1.open('GET', '/api/tenant-data/' + scope + '/bootstrap', true);
          x1.onload = function() {
            if (x1.status === 200) {
              try {
                var data = JSON.parse(x1.responseText);
                if (!isBackground) {
                  window.__BOOTSTRAP_DATA__ = data;
                  window.__BOOTSTRAP_READY__ = true;
                }
                // Cache in sessionStorage
                try {
                  sessionStorage.setItem(bootstrapCacheKey, JSON.stringify({ data: data, ts: Date.now() }));
                } catch(e) {}
              } catch(e) {}
            }
          };
          x1.send();
        }
        
        // Start bootstrap fetch immediately
        fetchBootstrap(false);
        
        // Start secondary data fetch in parallel (categories, brands, etc)
        var x2 = new XMLHttpRequest();
        x2.open('GET', '/api/tenant-data/' + scope + '/secondary', true);
        x2.onload = function() {
          if (x2.status === 200) {
            try {
              var data = JSON.parse(x2.responseText);
              window.__SECONDARY_DATA__ = data;
              // Cache in sessionStorage
              try {
                sessionStorage.setItem(secondaryCacheKey, JSON.stringify({ data: data, ts: Date.now() }));
              } catch(e) {}
            } catch(e) {}
          }
        };
        x2.send();
      })();
    </script>
    <style>
      .custom-loader {
        --r1: 154%;
        --r2: 68.5%;
        width: 120px;
        height: 120px;
        border-radius: 50%;
        background:
          radial-gradient(var(--r1) var(--r2) at top, #0000 79.5%, #8DCEF4 80%),
          radial-gradient(var(--r1) var(--r2) at bottom, #8DCEF4 79.5%, #0000 80%),
          radial-gradient(var(--r1) var(--r2) at top, #0000 79.5%, #8DCEF4 80%),
          #E4E4ED;
        background-size: 50.5% 220%;
        background-position: -100% 0%, 0% 0%, 100% 0%;
        background-repeat: no-repeat;
        animation: p9 2s infinite linear;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      @keyframes p9 {
        33% { background-position: 0% 33%, 100% 33%, 200% 33%; }
        66% { background-position: -100% 66%, 0% 66%, 100% 66%; }
        100% { background-position: 0% 100%, 100% 100%, 200% 100%; }
      }
    </style>
  </head>
  <body>
    <div id="initial-loader" class="custom-loader"></div>
    <div id="root"></div>
    <script type="module" src="/entry-client.tsx"></script>
  </body>
</html>